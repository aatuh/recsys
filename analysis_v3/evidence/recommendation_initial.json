{
  "request": {
    "namespace": "default",
    "user_id": "user_0001",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "numeric"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0210",
        "score": 1.105838201064334,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 1,
            "cooc_norm": 0.75,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.25,
              "cooc": 0.26249999999999996,
              "emb": 0.4
            }
          },
          "personalization": {
            "overlap": 0.30268211516921184,
            "boost_multiplier": 1.2118774806184482
          },
          "mmr": {
            "lambda": 0.3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0101",
        "score": 1.0359173922784672,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 1,
            "cooc_norm": 0.625,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.25,
              "cooc": 0.21875,
              "emb": 0.4
            }
          },
          "personalization": {
            "overlap": 0.2748898536953212,
            "boost_multiplier": 1.1924228975867248
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.2,
            "penalty": 0.13999999999999999
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0242",
        "score": 0.9324488733654647,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 1,
            "cooc_norm": 0.375,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.25,
              "cooc": 0.13124999999999998,
              "emb": 0.4
            }
          },
          "personalization": {
            "overlap": 0.27647793986827807,
            "boost_multiplier": 1.1935345579077947
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.2,
            "penalty": 0.13999999999999999
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0130",
        "score": 0.7754506171162854,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 1,
            "cooc_norm": 0.25,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.25,
              "cooc": 0.0875,
              "emb": 0.4
            }
          },
          "personalization": {
            "overlap": 0.0735120912664124,
            "boost_multiplier": 1.0514584638864886
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.09090909090909091,
            "penalty": 0.06363636363636363
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0003",
        "score": 0.7751643959941282,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8333333333333334,
            "cooc_norm": 0.625,
            "emb_norm": 0.8333333333333334,
            "contrib": {
              "pop": 0.20833333333333334,
              "cooc": 0.21875,
              "emb": 0.33333333333333337
            }
          },
          "personalization": {
            "overlap": 0.027706105977226964,
            "boost_multiplier": 1.019394274184059
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.1,
            "penalty": 0.06999999999999999
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0037",
        "score": 0.7521624306254386,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.6666666666666666,
            "cooc_norm": 0.875,
            "emb_norm": 0.6666666666666666,
            "contrib": {
              "pop": 0.16666666666666666,
              "cooc": 0.30624999999999997,
              "emb": 0.26666666666666666
            }
          },
          "personalization": {
            "overlap": 0.02429765271714514,
            "boost_multiplier": 1.0170083569020016
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.1111111111111111,
            "penalty": 0.07777777777777777
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0209",
        "score": 0.6212026334051045,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8333333333333334,
            "cooc_norm": 0.125,
            "emb_norm": 0.8333333333333334,
            "contrib": {
              "pop": 0.20833333333333334,
              "cooc": 0.04375,
              "emb": 0.33333333333333337
            }
          },
          "personalization": {
            "overlap": 0.08732721929054466,
            "boost_multiplier": 1.0611290535033813
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.42857142857142855,
            "penalty": 0.3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0001",
        "score": 0.3979548864116719,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.18434188659281922,
            "cooc_norm": 1,
            "contrib": {
              "pop": 0.046085471648204805,
              "cooc": 0.35
            }
          },
          "personalization": {
            "overlap": 0.0067424652263205305,
            "boost_multiplier": 1.0047197256584244
          },
          "mmr": {
            "lambda": 0.3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0236",
        "score": 0.27176273380037963,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.04077139305472199,
            "cooc_norm": 0.625,
            "contrib": {
              "pop": 0.010192848263680497,
              "cooc": 0.21875
            }
          },
          "personalization": {
            "overlap": 0.2671901110532815,
            "boost_multiplier": 1.187033077737297
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.375,
            "penalty": 0.26249999999999996
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      },
      {
        "item_id": "item_0041",
        "score": 0.19713752656309413,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.05716223502463725,
            "cooc_norm": 0.5,
            "contrib": {
              "pop": 0.014290558756159312,
              "cooc": 0.175
            }
          },
          "personalization": {
            "overlap": 0.05922088287745692,
            "boost_multiplier": 1.04145461801422
          },
          "mmr": {
            "lambda": 0.3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0021",
            "item_0093",
            "item_0211",
            "item_0124",
            "item_0003",
            "item_0269",
            "item_0084",
            "item_0215",
            "item_0191",
            "item_0247"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 1.171249
          },
          "content": {
            "count": 21,
            "duration_ms": 2.251053
          },
          "merged": {
            "count": 321,
            "duration_ms": 0.014628
          },
          "popularity": {
            "count": 300,
            "duration_ms": 7.501027
          },
          "post_exclusion": {
            "count": 314,
            "duration_ms": 0.898337
          },
          "session": {
            "count": 0,
            "duration_ms": 1.462495
          }
        },
        "policy": {
          "total_candidates": 321,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 7,
          "after_exclusions": 314,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 314,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 314,
          "final_count": 10,
          "constraint_leak_count": 0
        }
      }
    }
  }
}