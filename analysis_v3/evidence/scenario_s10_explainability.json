{
  "request": {
    "namespace": "default",
    "user_id": "user_0004",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "full"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0315",
        "score": 1.0941142787441063,
        "reasons": [
          "recent_popularity",
          "collaborative",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 1,
            "cooc_norm": 0.8,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.05,
              "cooc": 0.27999999999999997,
              "emb": 0.6
            },
            "raw": {
              "pop": 24.869373321533203,
              "cooc": 4,
              "emb": 24.869373321533203
            }
          },
          "personalization": {
            "overlap": 0.27148764060232655,
            "boost_multiplier": 1.1764669663915122
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.1,
            "rank": 1
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0275",
        "score": 0.46174894567124436,
        "reasons": [
          "recent_popularity",
          "collaborative",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.30750237331687774,
            "cooc_norm": 0.6,
            "emb_norm": 0.30750237331687774,
            "contrib": {
              "pop": 0.015375118665843887,
              "cooc": 0.21,
              "emb": 0.18450142399012665
            },
            "raw": {
              "pop": 7.647391319274902,
              "cooc": 3,
              "emb": 7.647391319274902
            }
          },
          "personalization": {
            "overlap": 0.19470179100626978,
            "boost_multiplier": 1.1265561641540753
          },
          "mmr": {
            "lambda": 0.1,
            "max_sim": 0.375,
            "penalty": 0.3375,
            "relevance": 0.0422029905506095,
            "rank": 9
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0111",
        "score": 0.3135210112312006,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.014854924398111185,
            "cooc_norm": 0.8,
            "emb_norm": 0.0037850270981866535,
            "contrib": {
              "pop": 0.0007427462199055593,
              "cooc": 0.27999999999999997,
              "emb": 0.002271016258911992
            },
            "raw": {
              "pop": 0.36943266051977897,
              "cooc": 4,
              "emb": 0.0941312519369234
            }
          },
          "personalization": {
            "overlap": 0.16583726684787248,
            "boost_multiplier": 1.107794223451117
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.028655234404863075,
            "rank": 2
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0084",
        "score": 0.3007972789571082,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.00539129363371029,
            "cooc_norm": 0.8,
            "emb_norm": 0.004470211024738623,
            "contrib": {
              "pop": 0.00026956468168551454,
              "cooc": 0.27999999999999997,
              "emb": 0.0026821266148431733
            },
            "raw": {
              "pop": 0.13407809406274648,
              "cooc": 4,
              "emb": 0.11117134680025831
            }
          },
          "personalization": {
            "overlap": 0.09702981495266359,
            "boost_multiplier": 1.0630693797192314
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.02749230905773229,
            "rank": 3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0302",
        "score": 0.29957316338080353,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.0023734401664835003,
            "cooc_norm": 0.8,
            "emb_norm": 0.0038386114701970805,
            "contrib": {
              "pop": 0.00011867200832417501,
              "cooc": 0.27999999999999997,
              "emb": 0.0023031668821182484
            },
            "raw": {
              "pop": 0.05902596955660009,
              "cooc": 4,
              "emb": 0.09546386168865062
            }
          },
          "personalization": {
            "overlap": 0.09342993150161462,
            "boost_multiplier": 1.0607294554760496
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.027380427182128783,
            "rank": 4
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0160",
        "score": 0.23840386915706083,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.0034638878905325523,
            "cooc_norm": 0.6,
            "emb_norm": 0.0045323867901026415,
            "contrib": {
              "pop": 0.00017319439452662762,
              "cooc": 0.21,
              "emb": 0.002719432074061585
            },
            "raw": {
              "pop": 0.08614472109359218,
              "cooc": 3,
              "emb": 0.11271761912064815
            }
          },
          "personalization": {
            "overlap": 0.1843561532666055,
            "boost_multiplier": 1.1198314996232936
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.02178966802542015,
            "rank": 5
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0002",
        "score": 0.21370861256595639,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.010038521834674404,
            "cooc_norm": 0.6,
            "emb_norm": 0.002083501097310401,
            "contrib": {
              "pop": 0.0005019260917337202,
              "cooc": 0.21,
              "emb": 0.0012501006583862404
            },
            "raw": {
              "pop": 0.24965174710288016,
              "cooc": 3,
              "emb": 0.05181536660483643
            }
          },
          "personalization": {
            "overlap": 0.014215363463396233,
            "boost_multiplier": 1.0092399862512076
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.019532567732436935,
            "rank": 6
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0007",
        "score": 0.21302294620386836,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.02271685485656343,
            "cooc_norm": 0.6,
            "emb_norm": 0.003145172435067018,
            "contrib": {
              "pop": 0.0011358427428281716,
              "cooc": 0.21,
              "emb": 0.0018871034610402106
            },
            "raw": {
              "pop": 0.5649539441189605,
              "cooc": 3,
              "emb": 0.07821846744827732
            }
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.019469899108563834,
            "rank": 7
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0309",
        "score": 0.1769059885133713,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.008220756073236909,
            "cooc_norm": 0.4,
            "emb_norm": 0.005125008610857622,
            "contrib": {
              "pop": 0.00041103780366184546,
              "cooc": 0.13999999999999999,
              "emb": 0.003075005166514573
            },
            "raw": {
              "pop": 0.20444505177059005,
              "cooc": 2,
              "emb": 0.12745575241949048
            }
          },
          "personalization": {
            "overlap": 0.3583296310315781,
            "boost_multiplier": 1.2329142601705259
          },
          "mmr": {
            "lambda": 0.1,
            "max_sim": 0.375,
            "penalty": 0.3375,
            "relevance": 0.016168876684109747,
            "rank": 10
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0112",
        "score": 0.14080890150863506,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.05,
            "beta": 0.35,
            "gamma": 0.6,
            "pop_norm": 0.00199230986520077,
            "cooc_norm": 0.4,
            "emb_norm": 0.0011821433589583902,
            "contrib": {
              "pop": 9.96154932600385e-05,
              "cooc": 0.13999999999999999,
              "emb": 0.0007092860153750341
            },
            "raw": {
              "pop": 0.04954749780985144,
              "cooc": 2,
              "emb": 0.029399164513507436
            }
          },
          "mmr": {
            "lambda": 0.1,
            "relevance": 0.012869670403192658,
            "rank": 8
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 9,
            "duration_ms": 0.620064
          },
          "content": {
            "count": 1,
            "duration_ms": 4.419344
          },
          "merged": {
            "count": 310,
            "duration_ms": 0.024197
          },
          "popularity": {
            "count": 300,
            "duration_ms": 11.541072
          },
          "post_exclusion": {
            "count": 304,
            "duration_ms": 1.74803
          },
          "session": {
            "count": 0,
            "duration_ms": 0.256931
          }
        },
        "policy": {
          "total_candidates": 310,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 6,
          "after_exclusions": 304,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 304,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 304,
          "final_count": 10,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}