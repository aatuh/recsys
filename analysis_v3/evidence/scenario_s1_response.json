{
  "request": {
    "namespace": "default",
    "user_id": "user_0003",
    "k": 15,
    "context": {
      "surface": "home"
    },
    "constraints": {
      "include_tags_any": [
        "books"
      ]
    },
    "include_reasons": true,
    "explain_level": "tags"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0001",
        "score": 1.3617625589138074,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0145",
        "score": 1.2209784270810533,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0081",
        "score": 1.2068668924668675,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0004",
        "score": 1.2056120365142173,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0302",
        "score": 1.1767897601531647,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0019",
        "score": 1.1567771884706652,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0245",
        "score": 1.135790180650699,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0005",
        "score": 1.1265430688457054,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0011",
        "score": 1.126071333815774,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0100",
        "score": 1.1078669883353003,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0252",
        "score": 1.1054445446878787,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0164",
        "score": 0.9185606299797531,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0076",
        "score": 0.30602217518359875,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0138",
        "score": 0.23931458806562153,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0282",
        "score": 0.16992296679673405,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 234,
            "duration_ms": 0.620916
          },
          "content": {
            "count": 28,
            "duration_ms": 1.567055
          },
          "merged": {
            "count": 55,
            "duration_ms": 0.046699
          },
          "popularity": {
            "count": 35,
            "duration_ms": 1.876085
          },
          "post_exclusion": {
            "count": 35,
            "duration_ms": 0.634762
          },
          "session": {
            "count": 0,
            "duration_ms": 0.201024
          }
        },
        "policy": {
          "total_candidates": 55,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 1,
          "after_exclusions": 54,
          "constraint_include_tags": [
            "books"
          ],
          "constraint_filtered_count": 19,
          "constraint_filtered_ids": [
            "item_0027",
            "item_0055",
            "item_0067",
            "item_0073",
            "item_0088",
            "item_0092",
            "item_0175",
            "item_0194",
            "item_0205",
            "item_0226",
            "item_0229",
            "item_0278",
            "item_0310",
            "item_0010",
            "item_0074",
            "item_0099",
            "item_0154",
            "item_0160",
            "item_0173"
          ],
          "after_constraint_filters": 35,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 35,
          "final_count": 15,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}