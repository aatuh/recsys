{
  "request": {
    "namespace": "default",
    "user_id": "user_0004",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "full"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0275",
        "score": 0.8877275419565537,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 1,
            "cooc_norm": 0.375,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.25,
              "cooc": 0.13124999999999998,
              "emb": 0.4
            },
            "raw": {
              "pop": 5,
              "cooc": 3,
              "emb": 5
            }
          },
          "personalization": {
            "overlap": 0.1947017910062697,
            "boost_multiplier": 1.1362912537043888
          },
          "mmr": {
            "lambda": 0.3,
            "relevance": 0.3,
            "rank": 1
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0315",
        "score": 0.8270787371530318,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8,
            "cooc_norm": 0.5,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.2,
              "cooc": 0.175,
              "emb": 0.32000000000000006
            },
            "raw": {
              "pop": 4,
              "cooc": 4,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.2714876406023264,
            "boost_multiplier": 1.1900413484216283
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.1,
            "penalty": 0.06999999999999999,
            "relevance": 0.27950425036835563,
            "rank": 2
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0039",
        "score": 0.7552670500713698,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8,
            "cooc_norm": 0.5,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.2,
              "cooc": 0.175,
              "emb": 0.32000000000000006
            },
            "raw": {
              "pop": 4,
              "cooc": 4,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.12387882851257936,
            "boost_multiplier": 1.0867151799588055
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.5714285714285714,
            "penalty": 0.39999999999999997,
            "relevance": 0.25523609926760615,
            "rank": 10
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0209",
        "score": 0.6472310783710616,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8,
            "cooc_norm": 0.25,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.2,
              "cooc": 0.0875,
              "emb": 0.32000000000000006
            },
            "raw": {
              "pop": 4,
              "cooc": 2,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.09342993150161459,
            "boost_multiplier": 1.0654009520511303
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.2,
            "penalty": 0.13999999999999999,
            "relevance": 0.21872625815277605,
            "rank": 4
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0242",
        "score": 0.6418197284265298,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8,
            "cooc_norm": 0.25,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.2,
              "cooc": 0.0875,
              "emb": 0.32000000000000006
            },
            "raw": {
              "pop": 4,
              "cooc": 2,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.08070482875139275,
            "boost_multiplier": 1.0564933801259748
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.2,
            "penalty": 0.13999999999999999,
            "relevance": 0.21689753829602634,
            "rank": 5
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0296",
        "score": 0.5553188526427696,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.8,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.2,
              "emb": 0.32000000000000006
            },
            "raw": {
              "pop": 4,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.09702981495266355,
            "boost_multiplier": 1.0679208704668646
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.1111111111111111,
            "penalty": 0.07777777777777777,
            "relevance": 0.18766530035291418,
            "rank": 3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_new_explore",
        "score": 0.42338528979587015,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.6,
            "emb_norm": 0.6,
            "contrib": {
              "pop": 0.15,
              "emb": 0.24
            },
            "raw": {
              "pop": 3,
              "emb": 3
            }
          },
          "personalization": {
            "overlap": 0.122290438812711,
            "boost_multiplier": 1.0856033071688977
          },
          "mmr": {
            "lambda": 0.3,
            "max_sim": 0.25,
            "penalty": 0.175,
            "relevance": 0.14307947082369257,
            "rank": 9
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0007",
        "score": 0.18061770616353956,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.19747082465415827,
            "cooc_norm": 0.375,
            "contrib": {
              "pop": 0.04936770616353957,
              "cooc": 0.13124999999999998
            },
            "raw": {
              "pop": 0.9873541232707914,
              "cooc": 3
            }
          },
          "mmr": {
            "lambda": 0.3,
            "relevance": 0.06103822320262511,
            "rank": 6
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0041",
        "score": 0.17027645127204213,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.06865145343545542,
            "cooc_norm": 0.375,
            "contrib": {
              "pop": 0.017162863358863856,
              "cooc": 0.13124999999999998
            },
            "raw": {
              "pop": 0.3432572671772771,
              "cooc": 3
            }
          },
          "personalization": {
            "overlap": 0.21045141446602736,
            "boost_multiplier": 1.147315990126219
          },
          "mmr": {
            "lambda": 0.3,
            "relevance": 0.05754348374617929,
            "rank": 7
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0112",
        "score": 0.09182963843951908,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.25,
            "beta": 0.35,
            "gamma": 0.4,
            "pop_norm": 0.01731855375807632,
            "cooc_norm": 0.25,
            "contrib": {
              "pop": 0.00432963843951908,
              "cooc": 0.0875
            },
            "raw": {
              "pop": 0.08659276879038161,
              "cooc": 2
            }
          },
          "mmr": {
            "lambda": 0.3,
            "relevance": 0.031033048125484426,
            "rank": 8
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 0.17268
          },
          "content": {
            "count": 17,
            "duration_ms": 1.084783
          },
          "merged": {
            "count": 317,
            "duration_ms": 0.014157
          },
          "popularity": {
            "count": 300,
            "duration_ms": 11.606486
          },
          "post_exclusion": {
            "count": 311,
            "duration_ms": 1.682596
          },
          "session": {
            "count": 0,
            "duration_ms": 0.166388
          }
        },
        "policy": {
          "total_candidates": 317,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 6,
          "after_exclusions": 311,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 311,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 311,
          "final_count": 10,
          "constraint_leak_count": 0
        }
      }
    }
  }
}