API_ADDR=:8000
DATABASE_URL=postgres://recsys-db:recsys@db:5432/recsys-db
# DATABASE_URL_FILE=/run/secrets/database_url
LOG_LEVEL=debug
MIGRATE_ON_START=true
MIGRATIONS_DIR=-

# Auth (local dev)
AUTH_REQUIRED=true
AUTH_REQUIRE_TENANT_CLAIM=false
TENANT_HEADER_NAME=X-Org-Id
AUTH_TENANT_CLAIMS=tenant_id,org_id,orgId,organization_id
AUTH_ROLE_CLAIMS=roles,role,scope,scopes
AUTH_ADMIN_ROLE=admin

# JWT (production)
JWT_AUTH_ENABLED=false
JWT_JWKS_URL=
JWT_ISSUER=
JWT_AUDIENCE=
JWT_ALLOWED_ALGORITHMS=
JWT_JWKS_REFRESH_INTERVAL=10m
JWT_JWKS_REFRESH_TIMEOUT=5s
JWT_ALLOWED_CLOCK_SKEW=30s
JWT_ALLOW_DANGEROUS_DEV_BYPASSES=false
JWT_SKIP_HEADER_ENABLED=false
JWT_SKIP_HEADER_NAME=
JWT_SKIP_TRUSTED_PROXIES=
AUTH_ALLOW_INSECURE_JWKS=false
AUTH_JWKS_ALLOWED_HOSTS=

# Dev header auth (for local/test)
DEV_AUTH_ENABLED=true
DEV_AUTH_USER_ID_HEADER=X-Dev-User-Id
DEV_AUTH_EMAIL_HEADER=X-Dev-User-Email
DEV_AUTH_FIRST_NAME_HEADER=X-Dev-User-First
DEV_AUTH_LAST_NAME_HEADER=X-Dev-User-Last
DEV_AUTH_DEFAULT_LANGUAGE=
DEV_AUTH_TENANT_HEADER=X-Dev-Org-Id

# Per-tenant rate limiting
TENANT_RATE_LIMIT_ENABLED=true
TENANT_RATE_LIMIT_CAPACITY=60
TENANT_RATE_LIMIT_REFILL_RATE=30
TENANT_RATE_LIMIT_RETRY_AFTER=1s
TENANT_RATE_LIMIT_FAIL_OPEN=false

# Audit logging (admin actions)
AUDIT_LOG_ENABLED=false
AUDIT_LOG_PATH=
AUDIT_LOG_FSYNC=false
