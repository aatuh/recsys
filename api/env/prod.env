# Production profile template. Review and customize before deploying.
API_PORT=8000
DATABASE_URL=postgres://recsys:recsys@db:5432/recsys?sslmode=disable
ENV=production
APP_DEBUG=false
ORG_ID=00000000-0000-0000-0000-000000000001

POPULARITY_HALFLIFE_DAYS=5
COVIS_WINDOW_DAYS=21
POPULARITY_FANOUT=300
MMR_LAMBDA=0.35
BRAND_CAP=2
CATEGORY_CAP=3
BRAND_TAG_PREFIXES=brand
CATEGORY_TAG_PREFIXES=category,cat
RULE_EXCLUDE_EVENTS=true
EXCLUDE_EVENT_TYPES=3
PURCHASED_WINDOW_DAYS=30
PROFILE_WINDOW_DAYS=30
PROFILE_BOOST=0.8
PROFILE_TOP_N=64
BLEND_ALPHA=0.3
BLEND_BETA=0.5
BLEND_GAMMA=0.2
BANDIT_ALGO=thompson

RULES_ENABLE=true
RULES_CACHE_REFRESH=5s
RULES_MAX_PIN_SLOTS=6
RULES_AUDIT_SAMPLE=1.0

AUDIT_DECISIONS_ENABLED=true
AUDIT_DECISIONS_SAMPLE_DEFAULT=1.0
AUDIT_DECISIONS_SAMPLE_OVERRIDES=-
AUDIT_DECISIONS_QUEUE=2048
AUDIT_DECISIONS_BATCH=200
AUDIT_DECISIONS_FLUSH_INTERVAL=250ms
AUDIT_DECISIONS_SALT=replace-with-secret

LLM_EXPLAIN_ENABLED=true
LLM_PROVIDER=openai
LLM_MODEL_PRIMARY=o4-mini
LLM_MODEL_ESCALATE=o3
LLM_TIMEOUT=6s
LLM_MAX_TOKENS=1200
LLM_API_KEY=replace-with-provider-key
LLM_BASE_URL=https://api.openai.com/v1/responses

MIGRATE_ON_START=true
MIGRATIONS_DIR=migrations
CORS_ALLOWED_ORIGINS=https://example.com
CORS_ALLOW_CREDENTIALS=true

API_AUTH_ENABLED=false # set to true once API_AUTH_KEYS is configured
API_AUTH_KEYS=
API_RATE_LIMIT_RPM=600
API_RATE_LIMIT_BURST=120

OBSERVABILITY_METRICS_ENABLED=true
OBSERVABILITY_METRICS_PATH=/metrics
OBSERVABILITY_TRACING_ENABLED=true
OBSERVABILITY_TRACING_EXPORTER=stdout
