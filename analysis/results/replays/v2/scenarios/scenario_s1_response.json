{
  "request": {
    "namespace": "default",
    "user_id": "user_0003",
    "k": 15,
    "context": {
      "surface": "home"
    },
    "constraints": {
      "include_tags_any": [
        "books"
      ]
    },
    "include_reasons": true,
    "explain_level": "tags"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0001",
        "score": 0.9925730557098235,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0004",
        "score": 0.7069558776187034,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0015",
        "score": 0.6987972697564061,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0284",
        "score": 0.5526193762193143,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0045",
        "score": 0.5402028035196429,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0065",
        "score": 0.5167771621756289,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0156",
        "score": 0.5100866622921092,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0266",
        "score": 0.5067205327325965,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0017",
        "score": 0.41601264329609217,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0109",
        "score": 0.41322589782914415,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0276",
        "score": 0.4121634511392961,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0094",
        "score": 0.40509199085541453,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0096",
        "score": 0.4045379239639228,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0258",
        "score": 0.40290030771772833,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      },
      {
        "item_id": "item_0134",
        "score": 0.2853180829713592,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ]
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 1.594918
          },
          "content": {
            "count": 177,
            "duration_ms": 3.661458
          },
          "merged": {
            "count": 54,
            "duration_ms": 0.053812
          },
          "popularity": {
            "count": 34,
            "duration_ms": 9.43914
          },
          "post_exclusion": {
            "count": 31,
            "duration_ms": 1.382983
          },
          "session": {
            "count": 0,
            "duration_ms": 1.703085
          }
        },
        "policy": {
          "total_candidates": 54,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 3,
          "after_exclusions": 51,
          "constraint_include_tags": [
            "books"
          ],
          "constraint_filtered_count": 20,
          "constraint_filtered_ids": [
            "item_0080",
            "item_0264",
            "item_0285",
            "item_0013",
            "item_0016",
            "item_0020",
            "item_0051",
            "item_0061",
            "item_0070",
            "item_0079",
            "item_0085",
            "item_0092",
            "item_0108",
            "item_0114",
            "item_0116",
            "item_0122",
            "item_0124",
            "item_0125",
            "item_0139",
            "item_0141"
          ],
          "after_constraint_filters": 31,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_block_exposure": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 31,
          "final_count": 15,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}