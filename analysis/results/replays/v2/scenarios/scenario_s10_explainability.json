{
  "request": {
    "namespace": "default",
    "user_id": "user_0004",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "full"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_new_explore",
        "score": 0.7048752170773935,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 1,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.45,
              "emb": 0.1
            },
            "raw": {
              "pop": 4,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.3610144920218961,
            "boost_multiplier": 1.281591303777079
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.23,
            "rank": 1
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0188",
        "score": 0.5253095779623761,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.06933961878420482,
            "cooc_norm": 1,
            "emb_norm": 0.018775544054384252,
            "contrib": {
              "pop": 0.03120282845289217,
              "cooc": 0.45,
              "emb": 0.0018775544054384253
            },
            "raw": {
              "pop": 0.27735847513681927,
              "cooc": 5,
              "emb": 0.07510217621753701
            }
          },
          "personalization": {
            "overlap": 0.11207243275496959,
            "boost_multiplier": 1.0874164975488763
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.17140793150921724,
            "rank": 2
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0318",
        "score": 0.4459849962835526,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.1106337606720519,
            "cooc_norm": 0.6,
            "emb_norm": 0.01779841118800865,
            "contrib": {
              "pop": 0.049785192302423356,
              "cooc": 0.27,
              "emb": 0.001779841118800865
            },
            "raw": {
              "pop": 0.4425350426882076,
              "cooc": 3,
              "emb": 0.0711936447520346
            }
          },
          "personalization": {
            "overlap": 0.4960513623117478,
            "boost_multiplier": 1.3869200626031633
          },
          "mmr": {
            "lambda": 0.23,
            "max_sim": 0.2857142857142857,
            "penalty": 0.22,
            "relevance": 0.14552440866133395,
            "rank": 9
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0132",
        "score": 0.41357073406973477,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.0928716507827976,
            "cooc_norm": 0.8,
            "emb_norm": 0.032448458442692424,
            "contrib": {
              "pop": 0.04179224285225892,
              "cooc": 0.36000000000000004,
              "emb": 0.0032448458442692427
            },
            "raw": {
              "pop": 0.3714866031311904,
              "cooc": 4,
              "emb": 0.1297938337707697
            }
          },
          "personalization": {
            "overlap": 0.027011281921117146,
            "boost_multiplier": 1.0210687998984713
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.1349476709231429,
            "rank": 3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0005",
        "score": 0.37803678729185086,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.1816995754933439,
            "cooc_norm": 0.6,
            "emb_norm": 0.005334968928879497,
            "contrib": {
              "pop": 0.08176480897200475,
              "cooc": 0.27,
              "emb": 0.0005334968928879497
            },
            "raw": {
              "pop": 0.7267983019733756,
              "cooc": 3,
              "emb": 0.021339875715517986
            }
          },
          "personalization": {
            "overlap": 0.0936650916628013,
            "boost_multiplier": 1.073058771496985
          },
          "mmr": {
            "lambda": 0.23,
            "max_sim": 0.42857142857142855,
            "penalty": 0.33,
            "relevance": 0.1233529835786225,
            "rank": 10
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0044",
        "score": 0.37772652282640345,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.15772146445951335,
            "cooc_norm": 0.6,
            "emb_norm": 0.017197955728957798,
            "contrib": {
              "pop": 0.07097465900678102,
              "cooc": 0.27,
              "emb": 0.00171979557289578
            },
            "raw": {
              "pop": 0.6308858578380534,
              "cooc": 3,
              "emb": 0.06879182291583119
            }
          },
          "personalization": {
            "overlap": 0.13105816977316068,
            "boost_multiplier": 1.1022253724230653
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.1232517446283459,
            "rank": 4
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0001",
        "score": 0.3648214236493654,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.3901253439674546,
            "cooc_norm": 0.4,
            "emb_norm": 0.01750576195858264,
            "contrib": {
              "pop": 0.17555640478535456,
              "cooc": 0.18000000000000002,
              "emb": 0.0017505761958582639
            },
            "raw": {
              "pop": 1.5605013758698183,
              "cooc": 2,
              "emb": 0.07002304783433055
            }
          },
          "personalization": {
            "overlap": 0.026962531854681046,
            "boost_multiplier": 1.0210307748466512
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.11904082510839795,
            "rank": 5
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0304",
        "score": 0.24480562760247201,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.1375084535307895,
            "cooc_norm": 0.4,
            "emb_norm": 0.01314396674860735,
            "contrib": {
              "pop": 0.06187880408885527,
              "cooc": 0.18000000000000002,
              "emb": 0.001314396674860735
            },
            "raw": {
              "pop": 0.550033814123158,
              "cooc": 2,
              "emb": 0.0525758669944294
            }
          },
          "personalization": {
            "overlap": 0.008500294783526787,
            "boost_multiplier": 1.006630229931151
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.0798798042326212,
            "rank": 6
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0220",
        "score": 0.21461843284243703,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.06646498419434803,
            "cooc_norm": 0.4,
            "emb_norm": 0.014297108890089644,
            "contrib": {
              "pop": 0.029909242887456614,
              "cooc": 0.18000000000000002,
              "emb": 0.0014297108890089644
            },
            "raw": {
              "pop": 0.2658599367773921,
              "cooc": 2,
              "emb": 0.057188435560358575
            }
          },
          "personalization": {
            "overlap": 0.01989439365464118,
            "boost_multiplier": 1.01551762705062
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.0700297561296451,
            "rank": 7
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0088",
        "score": 0.21177107054613134,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.45,
            "beta": 0.45,
            "gamma": 0.1,
            "pop_norm": 0.06784210192375309,
            "cooc_norm": 0.4,
            "emb_norm": 0.01242124680442433,
            "contrib": {
              "pop": 0.03052894586568889,
              "cooc": 0.18000000000000002,
              "emb": 0.0012421246804424331
            },
            "raw": {
              "pop": 0.27136840769501236,
              "cooc": 2,
              "emb": 0.04968498721769732
            }
          },
          "mmr": {
            "lambda": 0.23,
            "relevance": 0.06910066497665254,
            "rank": 8
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 0.298741
          },
          "content": {
            "count": 1,
            "duration_ms": 5.707619
          },
          "merged": {
            "count": 304,
            "duration_ms": 0.035458
          },
          "popularity": {
            "count": 303,
            "duration_ms": 26.830218
          },
          "post_exclusion": {
            "count": 303,
            "duration_ms": 2.24493
          },
          "session": {
            "count": 0,
            "duration_ms": 2.170218
          }
        },
        "policy": {
          "total_candidates": 304,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 1,
          "after_exclusions": 303,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 303,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_block_exposure": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 303,
          "final_count": 10,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}