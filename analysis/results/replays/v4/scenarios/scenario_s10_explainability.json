{
  "request": {
    "namespace": "default",
    "user_id": "user_0004",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "full"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_0239",
        "score": 0.7756054162608133,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 1,
            "cooc_norm": 0.4,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.3,
              "cooc": 0.2,
              "emb": 0.2
            },
            "raw": {
              "pop": 5,
              "cooc": 2,
              "emb": 5
            }
          },
          "personalization": {
            "overlap": 0.10800773751544758,
            "boost_multiplier": 1.1080077375154476
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.6,
            "rank": 1
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0188",
        "score": 0.5777816641382204,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.05516632677928497,
            "cooc_norm": 1,
            "emb_norm": 0.015020435243507402,
            "contrib": {
              "pop": 0.016549898033785492,
              "cooc": 0.5,
              "emb": 0.0030040870487014807
            },
            "raw": {
              "pop": 0.27583163389642484,
              "cooc": 5,
              "emb": 0.07510217621753701
            }
          },
          "personalization": {
            "overlap": 0.11207243275496952,
            "boost_multiplier": 1.1120724327549696
          },
          "mmr": {
            "lambda": 0.6,
            "max_sim": 0.6666666666666666,
            "penalty": 0.26666666666666666,
            "relevance": 0.4469656750905897,
            "rank": 9
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_new_explore",
        "score": 0.5444057968087583,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.8,
            "emb_norm": 0.8,
            "contrib": {
              "pop": 0.24,
              "emb": 0.16000000000000003
            },
            "raw": {
              "pop": 4,
              "emb": 4
            }
          },
          "personalization": {
            "overlap": 0.36101449202189584,
            "boost_multiplier": 1.3610144920218958
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.4211464634427133,
            "rank": 2
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0138",
        "score": 0.4996457896358269,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.07137646644343132,
            "cooc_norm": 0.6,
            "emb_norm": 0.01423872895040692,
            "contrib": {
              "pop": 0.021412939933029396,
              "cooc": 0.3,
              "emb": 0.0028477457900813845
            },
            "raw": {
              "pop": 0.3568823322171566,
              "cooc": 3,
              "emb": 0.0711936447520346
            }
          },
          "personalization": {
            "overlap": 0.5408768673932896,
            "boost_multiplier": 1.5408768673932896
          },
          "mmr": {
            "lambda": 0.6,
            "max_sim": 0.5,
            "penalty": 0.2,
            "relevance": 0.38652060377139813,
            "rank": 8
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0318",
        "score": 0.4925804175125665,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.08801978293318667,
            "cooc_norm": 0.6,
            "emb_norm": 0.01423872895040692,
            "contrib": {
              "pop": 0.026405934879956,
              "cooc": 0.3,
              "emb": 0.0028477457900813845
            },
            "raw": {
              "pop": 0.44009891466593337,
              "cooc": 3,
              "emb": 0.0711936447520346
            }
          },
          "personalization": {
            "overlap": 0.4960513623117474,
            "boost_multiplier": 1.4960513623117473
          },
          "mmr": {
            "lambda": 0.6,
            "max_sim": 0.2857142857142857,
            "penalty": 0.11428571428571428,
            "relevance": 0.381054907961287,
            "rank": 6
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0118",
        "score": 0.45756995848379495,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.09703987546170478,
            "cooc_norm": 0.8,
            "emb_norm": 0.019905028942335458,
            "contrib": {
              "pop": 0.029111962638511433,
              "cooc": 0.4,
              "emb": 0.003981005788467092
            },
            "raw": {
              "pop": 0.4851993773085239,
              "cooc": 4,
              "emb": 0.09952514471167728
            }
          },
          "personalization": {
            "overlap": 0.05651671082474129,
            "boost_multiplier": 1.0565167108247413
          },
          "mmr": {
            "lambda": 0.6,
            "max_sim": 0.1111111111111111,
            "penalty": 0.044444444444444446,
            "relevance": 0.35397119377252595,
            "rank": 4
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0132",
        "score": 0.4389017430352947,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.07388831847432262,
            "cooc_norm": 0.8,
            "emb_norm": 0.02595876675415394,
            "contrib": {
              "pop": 0.022166495542296785,
              "cooc": 0.4,
              "emb": 0.005191753350830788
            },
            "raw": {
              "pop": 0.36944159237161306,
              "cooc": 4,
              "emb": 0.1297938337707697
            }
          },
          "personalization": {
            "overlap": 0.027011281921117125,
            "boost_multiplier": 1.027011281921117
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.3395296632799983,
            "rank": 3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0044",
        "score": 0.38500818022686284,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.12548257404701674,
            "cooc_norm": 0.6,
            "emb_norm": 0.013758364583166238,
            "contrib": {
              "pop": 0.03764477221410502,
              "cooc": 0.3,
              "emb": 0.0027516729166332477
            },
            "raw": {
              "pop": 0.6274128702350836,
              "cooc": 3,
              "emb": 0.06879182291583119
            }
          },
          "personalization": {
            "overlap": 0.1310581697731606,
            "boost_multiplier": 1.1310581697731605
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.2978381832991707,
            "rank": 5
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0066",
        "score": 0.3360674874146599,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.08269210062431348,
            "cooc_norm": 0.6,
            "emb_norm": 0.02299318499137042,
            "contrib": {
              "pop": 0.024807630187294042,
              "cooc": 0.3,
              "emb": 0.004598636998274084
            },
            "raw": {
              "pop": 0.4134605031215674,
              "cooc": 3,
              "emb": 0.1149659249568521
            }
          },
          "personalization": {
            "overlap": 0.020221898891010767,
            "boost_multiplier": 1.0202218988910108
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.25997819022577606,
            "rank": 7
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      },
      {
        "item_id": "item_0180",
        "score": 0.2324700381082517,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.3,
            "beta": 0.5,
            "gamma": 0.2,
            "pop_norm": 0.09197587536049863,
            "cooc_norm": 0.4,
            "emb_norm": 0.01136025301613044,
            "contrib": {
              "pop": 0.02759276260814959,
              "cooc": 0.2,
              "emb": 0.002272050603226088
            },
            "raw": {
              "pop": 0.45987937680249313,
              "cooc": 2,
              "emb": 0.0568012650806522
            }
          },
          "personalization": {
            "overlap": 0.011333726378035704,
            "boost_multiplier": 1.0113337263780358
          },
          "mmr": {
            "lambda": 0.6,
            "relevance": 0.1798363187526366,
            "rank": 10
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0318",
            "item_0030",
            "item_0162",
            "item_0210",
            "item_0143",
            "item_0230",
            "item_0007",
            "item_0201",
            "item_0138",
            "item_0044"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 0.222695
          },
          "content": {
            "count": 3,
            "duration_ms": 5.720222
          },
          "merged": {
            "count": 300,
            "duration_ms": 0.023014
          },
          "popularity": {
            "count": 300,
            "duration_ms": 34.741195
          },
          "post_exclusion": {
            "count": 299,
            "duration_ms": 1.847571
          },
          "session": {
            "count": 0,
            "duration_ms": 0.896454
          }
        },
        "policy": {
          "total_candidates": 300,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 1,
          "after_exclusions": 299,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 299,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_block_exposure": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 299,
          "final_count": 10,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}