id,name,input,expected,observed,result,env_hash
S1,Strict include filter,POST /v1/recommendations include_tags_any=['books'] for user_0003,All results belong to category/tag 'books'; zero leakage.,"Returned 15 items, all tagged 'books'.",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S2,Hard exclude tag,"Create BLOCK rule on tag 'high_margin', request /v1/recommendations user_0001",No items tagged 'high_margin' appear in ranked list.,"Before block: ['item_0241', 'item_0077', 'item_0219']; After block: []",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S3,Boost monotonicity,Manual override boost +3.0 for item_0117 on surface home,Boosted item ranks higher (lower position number).,Target item_0117 moved from 2 to 0,PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S4,Diversity budget,Override mmr_lambda=0.0 vs default for user_0005,Higher diversity (lower similarity) with ≤30% NDCG loss.,Similarity 0.095 -> 0.084; NDCG 0.065 -> 0.087 (+33.22%).,PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S5,Pin position,PIN rule for item_0005 on surface home,Pinned item appears at requested top slot.,Target item rank=0; recommendation count=10,PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S6,Whitelist brand,/v1/recommendations include_tags_any=['acmetech'] user_0008,All items belong to brand 'AcmeTech'.,Returned 10 items; non-whitelisted=[],PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S7,Cold-start user,Call /v1/recommendations for real new_users segment sample,"Each list remains diverse (avg categories ≥4.0) and avg MRR ≥0.2, proving non-zero relevance.","users=10, evaluated=10, avg_mrr=0.567, avg_categories=8.00, min_items=10, thresholds(mrr=0.20, categories=4.00)",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S8,New item exposure,Insert fresh item and measure exposure before/after boost,Boost controls increase exposure materially without manual data load.,"Baseline exposure=78%; Boosted exposure=100%; Boost policy: {'total_candidates': 300.8, 'explicit_exclude_hits': 0.0, 'recent_event_exclude_hits': 2.625, 'after_exclusions': 298.175, 'constraint_filtered_count': 0.0, 'after_constraint_filters': 298.175, 'rule_block_count': 0.0, 'rule_pin_count': 0.0, 'rule_boost_count': 1.0, 'rule_boost_injected': 0.0, 'rule_block_exposure': 0.0, 'rule_boost_exposure': 1.0, 'rule_pin_exposure': 0.0, 'after_rules': 298.175, 'final_count': 15.0, 'constraint_leak_count': 0.0}",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S9,Multi-objective trade-off,Boost rule on tag 'high_margin' with varying boost_value,Higher boost lifts margin share while relevance drops smoothly.,"boost 0.0: margin=0.380, ndcg=0.121; boost 0.4: margin=0.416, ndcg=0.096; boost 0.8: margin=0.438, ndcg=0.107",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
S10,Explainability,Request recommendations with include_reasons=true & explain_level=full,"Response includes reasons, explain blocks, and model identifier.","model_version=popularity_v1, reasons=True, explain_blocks=True",PASS,dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37
