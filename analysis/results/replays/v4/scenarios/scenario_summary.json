{
  "results": [
    {
      "id": "S1",
      "name": "Strict include filter",
      "input": "POST /v1/recommendations include_tags_any=['books'] for user_0003",
      "expected": "All results belong to category/tag 'books'; zero leakage.",
      "observed": "Returned 15 items, all tagged 'books'.",
      "passed": true
    },
    {
      "id": "S2",
      "name": "Hard exclude tag",
      "input": "Create BLOCK rule on tag 'high_margin', request /v1/recommendations user_0001",
      "expected": "No items tagged 'high_margin' appear in ranked list.",
      "observed": "Before block: ['item_0241', 'item_0077', 'item_0219']; After block: []",
      "passed": true
    },
    {
      "id": "S3",
      "name": "Boost monotonicity",
      "input": "Manual override boost +3.0 for item_0117 on surface home",
      "expected": "Boosted item ranks higher (lower position number).",
      "observed": "Target item_0117 moved from 2 to 0",
      "passed": true
    },
    {
      "id": "S4",
      "name": "Diversity budget",
      "input": "Override mmr_lambda=0.0 vs default for user_0005",
      "expected": "Higher diversity (lower similarity) with \u226430% NDCG loss.",
      "observed": "Similarity 0.095 -> 0.084; NDCG 0.065 -> 0.087 (+33.22%).",
      "passed": true
    },
    {
      "id": "S5",
      "name": "Pin position",
      "input": "PIN rule for item_0005 on surface home",
      "expected": "Pinned item appears at requested top slot.",
      "observed": "Target item rank=0; recommendation count=10",
      "passed": true
    },
    {
      "id": "S6",
      "name": "Whitelist brand",
      "input": "/v1/recommendations include_tags_any=['acmetech'] user_0008",
      "expected": "All items belong to brand 'AcmeTech'.",
      "observed": "Returned 10 items; non-whitelisted=[]",
      "passed": true
    },
    {
      "id": "S7",
      "name": "Cold-start user",
      "input": "Call /v1/recommendations for real new_users segment sample",
      "expected": "Each list remains diverse (avg categories \u22654.0) and avg MRR \u22650.2, proving non-zero relevance.",
      "observed": "users=10, evaluated=10, avg_mrr=0.567, avg_categories=8.00, min_items=10, thresholds(mrr=0.20, categories=4.00)",
      "passed": true
    },
    {
      "id": "S8",
      "name": "New item exposure",
      "input": "Insert fresh item and measure exposure before/after boost",
      "expected": "Boost controls increase exposure materially without manual data load.",
      "observed": "Baseline exposure=78%; Boosted exposure=100%; Boost policy: {'total_candidates': 300.8, 'explicit_exclude_hits': 0.0, 'recent_event_exclude_hits': 2.625, 'after_exclusions': 298.175, 'constraint_filtered_count': 0.0, 'after_constraint_filters': 298.175, 'rule_block_count': 0.0, 'rule_pin_count': 0.0, 'rule_boost_count': 1.0, 'rule_boost_injected': 0.0, 'rule_block_exposure': 0.0, 'rule_boost_exposure': 1.0, 'rule_pin_exposure': 0.0, 'after_rules': 298.175, 'final_count': 15.0, 'constraint_leak_count': 0.0}",
      "passed": true
    },
    {
      "id": "S9",
      "name": "Multi-objective trade-off",
      "input": "Boost rule on tag 'high_margin' with varying boost_value",
      "expected": "Higher boost lifts margin share while relevance drops smoothly.",
      "observed": "boost 0.0: margin=0.380, ndcg=0.121; boost 0.4: margin=0.416, ndcg=0.096; boost 0.8: margin=0.438, ndcg=0.107",
      "passed": true
    },
    {
      "id": "S10",
      "name": "Explainability",
      "input": "Request recommendations with include_reasons=true & explain_level=full",
      "expected": "Response includes reasons, explain blocks, and model identifier.",
      "observed": "model_version=popularity_v1, reasons=True, explain_blocks=True",
      "passed": true
    }
  ],
  "timestamp": "2025-11-16T16:11:00.003036Z",
  "base_url": "https://api.pepe.local",
  "namespace": "default",
  "org_id": "00000000-0000-0000-0000-000000000001",
  "env_file": "api/.env",
  "env_hash": "dad86c751cd90ae684da71bfb83b5ecf5c52f983ae795345732a161ad9623a37"
}