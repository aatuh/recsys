{
  "request": {
    "namespace": "default",
    "user_id": "user_0004",
    "k": 10,
    "context": {
      "surface": "home"
    },
    "include_reasons": true,
    "explain_level": "full"
  },
  "response": {
    "model_version": "popularity_v1",
    "items": [
      {
        "item_id": "item_new_explore",
        "score": 0.6619233177842394,
        "reasons": [
          "recent_popularity",
          "content_similarity",
          "embedding_similarity",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 1,
            "emb_norm": 1,
            "contrib": {
              "pop": 0.1,
              "emb": 0.55
            },
            "raw": {
              "pop": 3,
              "emb": 3
            }
          },
          "personalization": {
            "overlap": 0.12229043881271105,
            "boost_multiplier": 1.0183435658219067
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.12,
            "rank": 1
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0243",
        "score": 0.37187176508413744,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.07320548198755925,
            "cooc_norm": 1,
            "contrib": {
              "pop": 0.0073205481987559246,
              "cooc": 0.35
            },
            "raw": {
              "pop": 0.21961644596267774,
              "cooc": 24
            }
          },
          "personalization": {
            "overlap": 0.27148764060232655,
            "boost_multiplier": 1.040723146090349
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.06741658831339484,
            "rank": 2
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0002",
        "score": 0.253147862570149,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.19275889449406322,
            "cooc_norm": 0.6666666666666666,
            "contrib": {
              "pop": 0.019275889449406322,
              "cooc": 0.2333333333333333
            },
            "raw": {
              "pop": 0.5782766834821896,
              "cooc": 16
            }
          },
          "personalization": {
            "overlap": 0.014215363463396233,
            "boost_multiplier": 1.0021323045195094
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.04589314606729085,
            "rank": 3
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0084",
        "score": 0.24723236837111426,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.10352318975262591,
            "cooc_norm": 0.6666666666666666,
            "contrib": {
              "pop": 0.010352318975262592,
              "cooc": 0.2333333333333333
            },
            "raw": {
              "pop": 0.3105695692578777,
              "cooc": 16
            }
          },
          "personalization": {
            "overlap": 0.09702981495266359,
            "boost_multiplier": 1.0145544722428996
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.04482072682353254,
            "rank": 4
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0302",
        "score": 0.24122471227520775,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.045574608510477364,
            "cooc_norm": 0.6666666666666666,
            "contrib": {
              "pop": 0.004557460851047737,
              "cooc": 0.2333333333333333
            },
            "raw": {
              "pop": 0.13672382553143209,
              "cooc": 16
            }
          },
          "personalization": {
            "overlap": 0.09342993150161463,
            "boost_multiplier": 1.014014489725242
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.04373159956038969,
            "rank": 5
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0007",
        "score": 0.21862072325636664,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.4362072325636665,
            "cooc_norm": 0.5,
            "contrib": {
              "pop": 0.04362072325636665,
              "cooc": 0.175
            },
            "raw": {
              "pop": 1.3086216976909995,
              "cooc": 12
            }
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.039633725064381835,
            "rank": 6
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0123",
        "score": 0.20261435707295855,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.18364772938090668,
            "cooc_norm": 0.5,
            "contrib": {
              "pop": 0.01836477293809067,
              "cooc": 0.175
            },
            "raw": {
              "pop": 0.55094318814272,
              "cooc": 12
            }
          },
          "personalization": {
            "overlap": 0.31889931808931704,
            "boost_multiplier": 1.0478348977133976
          },
          "mmr": {
            "lambda": 0.12,
            "max_sim": 0.42857142857142855,
            "penalty": 0.3771428571428571,
            "relevance": 0.036731932831954306,
            "rank": 10
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0160",
        "score": 0.18667461092272675,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.06651329861375792,
            "cooc_norm": 0.5,
            "contrib": {
              "pop": 0.006651329861375792,
              "cooc": 0.175
            },
            "raw": {
              "pop": 0.19953989584127377,
              "cooc": 12
            }
          },
          "personalization": {
            "overlap": 0.18435615326660554,
            "boost_multiplier": 1.0276534229899907
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.033842218137462604,
            "rank": 7
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0082",
        "score": 0.15144602755251657,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity",
          "personalization"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.30481848955516927,
            "cooc_norm": 0.3333333333333333,
            "contrib": {
              "pop": 0.03048184895551693,
              "cooc": 0.11666666666666665
            },
            "raw": {
              "pop": 0.9144554686655078,
              "cooc": 8
            }
          },
          "personalization": {
            "overlap": 0.19470179100626978,
            "boost_multiplier": 1.0292052686509405
          },
          "mmr": {
            "lambda": 0.12,
            "max_sim": 0.2857142857142857,
            "penalty": 0.2514285714285714,
            "relevance": 0.027455632424518744,
            "rank": 9
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      },
      {
        "item_id": "item_0112",
        "score": 0.12049228415727375,
        "reasons": [
          "recent_popularity",
          "co_visitation",
          "diversity"
        ],
        "explain": {
          "blend": {
            "alpha": 0.1,
            "beta": 0.35,
            "gamma": 0.55,
            "pop_norm": 0.038256174906070986,
            "cooc_norm": 0.3333333333333333,
            "contrib": {
              "pop": 0.0038256174906070987,
              "cooc": 0.11666666666666665
            },
            "raw": {
              "pop": 0.11476852471821296,
              "cooc": 8
            }
          },
          "mmr": {
            "lambda": 0.12,
            "relevance": 0.02184403194508088,
            "rank": 8
          },
          "caps": {
            "brand": {
              "applied": false
            },
            "category": {
              "applied": false
            }
          },
          "anchors": [
            "item_0111",
            "item_0255",
            "item_0308",
            "item_0146",
            "item_0089",
            "item_0123",
            "item_0175",
            "item_0116",
            "item_0131",
            "item_0235"
          ]
        }
      }
    ],
    "trace": {
      "extras": {
        "candidate_sources": {
          "collaborative": {
            "count": 0,
            "duration_ms": 0.207336
          },
          "content": {
            "count": 1,
            "duration_ms": 1.352012
          },
          "merged": {
            "count": 301,
            "duration_ms": 0.021461
          },
          "popularity": {
            "count": 300,
            "duration_ms": 19.37045
          },
          "post_exclusion": {
            "count": 295,
            "duration_ms": 1.561082
          },
          "session": {
            "count": 0,
            "duration_ms": 1.236783
          }
        },
        "policy": {
          "total_candidates": 301,
          "explicit_exclude_hits": 0,
          "recent_event_exclude_hits": 6,
          "after_exclusions": 295,
          "constraint_filtered_count": 0,
          "after_constraint_filters": 295,
          "rule_block_count": 0,
          "rule_pin_count": 0,
          "rule_boost_count": 0,
          "rule_boost_injected": 0,
          "rule_boost_exposure": 0,
          "rule_pin_exposure": 0,
          "after_rules": 295,
          "final_count": 10,
          "constraint_leak_count": 0
        },
        "recent_event_count": 10
      }
    }
  }
}