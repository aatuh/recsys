id,name,input,expected,observed,result
S1,Strict include filter,POST /v1/recommendations include_tags_any=['books'] for user_0003,All results belong to category/tag 'books'; zero leakage.,"Returned 15 items; offending items=['item_0233', 'item_0123', 'item_0046', 'item_0240', 'item_0043', 'item_0092', 'item_0010', 'item_0031', 'item_0104', 'item_0186', 'item_0023', 'item_0148', 'item_0170']",FAIL
S2,Hard exclude tag,"Create BLOCK rule on tag 'high_margin', request /v1/recommendations user_0001",No items tagged 'high_margin' appear in ranked list.,"Before block: ['item_0210', 'item_0101', 'item_0242', 'item_0275', 'item_0209', 'item_0025']; After block: ['item_0210', 'item_0101', 'item_0242', 'item_0275', 'item_0209', 'item_0025']",FAIL
S3,Boost monotonicity,Manual override boost +3.0 for item_0003 on surface home,Boosted item ranks higher (lower position number).,Target item_0003 moved from 2 to 2,FAIL
S4,Diversity budget,Override mmr_lambda=0.1 vs default for user_0005,Higher diversity (lower similarity) with â‰¤5% NDCG loss.,Similarity 0.108 -> 0.093; NDCG 0.000 -> 0.000 (+0.00%).,PASS
S5,Pin position,PIN rule for item_0005 on surface home,Pinned item appears at requested top slot.,Target item rank=None; recommendation count=10,FAIL
S6,Whitelist brand,/v1/recommendations include_tags_any=['acmetech'] user_0008,All items belong to brand 'AcmeTech'.,"Returned 10 items; non-whitelisted=['item_0005', 'item_0019', 'item_0197', 'item_0233', 'item_0167', 'item_0210', 'item_0003', 'item_0170', 'item_0062']",FAIL
S7,Cold-start user,Upsert new user with no history then call /v1/recommendations,"List is non-empty, diverse, adheres to business rules.",Returned 10 items across 9 categories.,PASS
S8,New item exposure,Insert fresh item and measure exposure before/after boost,Boost controls increase exposure materially without manual data load.,Baseline exposure=88%; Boosted exposure=88%,FAIL
S9,Multi-objective trade-off,Boost rule on tag 'high_margin' with varying boost_value,Higher boost lifts margin share while relevance drops smoothly.,"boost 0.0: margin=0.395, ndcg=0.078; boost 0.4: margin=0.395, ndcg=0.078; boost 0.8: margin=0.395, ndcg=0.078",FAIL
S10,Explainability,Request recommendations with include_reasons=true & explain_level=full,"Response includes reasons, explain blocks, and model identifier.","model_version=popularity_v1, reasons=True, explain_blocks=True",PASS
